# 📦 数据备份与恢复指南

## 功能说明

现在你可以在侧栏的"每日一词"下方找到**数据管理**功能，用于备份和恢复所有学习数据。

## 包含的数据

### 1. 单词学习数据
- ✅ 所有单词的学习进度（认识/不认识/模糊）
- ✅ 每个单词的复习次数和最后复习时间
- ✅ 今日学习统计
- ✅ 当前选择的词库
- ✅ 每日一词记录

### 2. 番茄钟数据
- ✅ 今日完成的番茄数
- ✅ 累计专注分钟数
- ✅ 最后记录日期
- ✅ 计时器状态（如果正在运行）

### 3. 待办清单数据
- ✅ 所有待办事项（包括子任务）
- ✅ 待办分组信息
- ✅ 完成状态和截止时间

## 使用方法

### 📤 导出数据

1. 在侧栏找到"数据管理"区域
2. 点击"导出数据"按钮
3. 浏览器会自动下载一个 JSON 文件
4. 文件名格式：`kiro-backup-2026-01-21.json`

**建议：**
- 定期导出备份（每周或每月）
- 在换电脑前务必导出
- 保存到云盘或多个位置

### 📥 导入数据

1. 在侧栏找到"数据管理"区域
2. 点击"导入数据"按钮
3. 选择之前导出的 JSON 文件
4. 系统会智能合并数据
5. 导入完成后页面会自动刷新

## 智能合并策略

### 单词学习进度
- 对于同一个单词，保留**最新的学习记录**
- 比较 `lastReview` 日期，选择更新的那个

### 番茄钟统计
- **总分钟数**：两边累加
- **今日番茄数**：保留较大的值

### 待办清单
- 根据待办文本去重，避免重复
- 分组按 ID 去重

## 注意事项

⚠️ **重要提示：**

1. **备份文件很重要**：请妥善保管导出的 JSON 文件
2. **不要手动编辑**：备份文件是 JSON 格式，不建议手动修改
3. **导入前备份**：在导入数据前，建议先导出当前数据作为备份
4. **网络无关**：所有数据存储在本地浏览器，不会上传到服务器

## 跨设备同步

### 方案 1：手动同步
1. 在电脑 A 导出数据
2. 通过云盘/邮件/U盘传输文件
3. 在电脑 B 导入数据

### 方案 2：定期备份
- 每周导出一次到云盘
- 换设备时从云盘下载最新备份
- 导入到新设备

## 文件格式示例

```json
{
  "version": "1.0",
  "exportDate": "2026-01-21T10:30:00.000Z",
  "vocabulary": {
    "progress": {
      "kaoyan_f0_i123": {
        "status": "known",
        "reviewCount": 3,
        "lastReview": "Wed Jan 21 2026"
      }
    },
    "todayStats": { ... },
    "currentBank": "kaoyan"
  },
  "pomodoro": {
    "todayCount": "5",
    "totalMinutes": "125"
  },
  "todos": {
    "todos": "[...]",
    "groups": "[...]"
  }
}
```

## 常见问题

### Q: 导入数据会覆盖现有数据吗？
A: 不会完全覆盖。系统会智能合并，保留最新的学习记录。

### Q: 可以只导入部分数据吗？
A: 目前是全量导入，但合并策略会保护你的现有数据。

### Q: 换浏览器需要重新导入吗？
A: 是的，不同浏览器的 localStorage 是独立的。

### Q: 数据会丢失吗？
A: 只要定期备份，数据就不会丢失。建议每周导出一次。

### Q: 可以在手机上使用吗？
A: 可以！在手机浏览器上也能导入导出数据。

---

**祝学习愉快！** 🎉
