# 重构后测试检查清单

## 🧪 测试说明

在删除旧文件并更新引用后，需要测试所有功能以确保一切正常。

---

## 📋 测试清单

### 1. 背单词页面测试

**页面路径：** `content/Tools/Vocabulary/index.typ`

#### 待办清单功能
- [ ] 页面正常加载，无控制台错误
- [ ] 待办清单显示正常
- [ ] 可以添加新待办
- [ ] 可以编辑待办（双击文字）
- [ ] 可以删除待办
- [ ] 可以完成/取消完成待办
- [ ] 可以添加子待办
- [ ] 可以创建分组
- [ ] 可以拖拽排序
- [ ] 可以设置截止时间
- [ ] 右键菜单正常工作
- [ ] 数据持久化（刷新页面后数据保留）

#### 性能检查
- [ ] 页面加载速度正常
- [ ] 无明显卡顿
- [ ] 浏览器控制台无错误
- [ ] 网络请求正常（检查开发者工具）

---

### 2. 番茄钟页面测试

**页面路径：** `content/Tools/Pomodoro/index.typ`

#### 番茄钟功能
- [ ] 页面正常加载，无控制台错误
- [ ] 番茄钟显示正常（25:00）
- [ ] 可以开始/暂停计时
- [ ] 可以重置计时
- [ ] 可以切换模式（专注/短休/长休）
- [ ] 统计数据显示正常（今日番茄、专注分钟）
- [ ] 计时完成后有提示
- [ ] 页面刷新后恢复计时状态
- [ ] 空格键开始/暂停正常
- [ ] R键重置正常

#### 倒计时功能
- [ ] 倒计时显示正常
- [ ] 倒计时数值更新正常
- [ ] 显示天、时、分、秒

#### 待办清单功能
- [ ] 待办清单显示正常
- [ ] 所有待办清单功能正常（同背单词页面）
- [ ] 数据与背单词页面共享（同一个 localStorage）

#### 性能检查
- [ ] 页面加载速度正常
- [ ] 多个定时器运行流畅
- [ ] 无明显卡顿
- [ ] 浏览器控制台无错误

---

### 3. 数据兼容性测试

#### localStorage 数据
- [ ] 打开背单词页面，添加一些待办
- [ ] 打开番茄钟页面，检查待办是否显示
- [ ] 在番茄钟页面修改待办
- [ ] 返回背单词页面，检查修改是否同步
- [ ] 刷新页面，数据保留

#### 数据键名检查
打开浏览器开发者工具 → Application/存储 → Local Storage，检查：
- [ ] `pomodoro_todos` - 待办列表数据
- [ ] `pomodoro_groups` - 分组数据
- [ ] `pomodoro_todayCount` - 今日番茄数
- [ ] `pomodoro_totalMinutes` - 总专注分钟数
- [ ] `pomodoro_timerState` - 计时器状态

---

### 4. 浏览器兼容性测试

#### Chrome/Edge
- [ ] 背单词页面功能正常
- [ ] 番茄钟页面功能正常

#### Firefox
- [ ] 背单词页面功能正常
- [ ] 番茄钟页面功能正常

#### Safari（如果可用）
- [ ] 背单词页面功能正常
- [ ] 番茄钟页面功能正常

---

### 5. 网络请求检查

打开浏览器开发者工具 → Network，检查：

#### 背单词页面
- [ ] 加载 `todo.css` ✅
- [ ] 加载 `todo.js` ✅
- [ ] 加载 `timer-manager.js` ✅
- [ ] 不加载 `pomodoro-todo.css` ✅
- [ ] 不加载 `pomodoro-todo.js` ✅
- [ ] 所有请求返回 200 状态码

#### 番茄钟页面
- [ ] 加载 `pomodoro.css` ✅
- [ ] 加载 `pomodoro.js` ✅
- [ ] 加载 `todo.css` ✅
- [ ] 加载 `todo.js` ✅
- [ ] 加载 `timer-manager.js` ✅
- [ ] 不加载 `pomodoro-todo.css` ✅
- [ ] 不加载 `pomodoro-todo.js` ✅
- [ ] 所有请求返回 200 状态码

---

### 6. 控制台检查

打开浏览器开发者工具 → Console，检查：

#### 背单词页面
- [ ] 无红色错误信息
- [ ] 无 404 错误（文件未找到）
- [ ] 无 JavaScript 错误
- [ ] 可能有的正常日志：
  - `Reinitializing todo...`（如果有动态初始化）

#### 番茄钟页面
- [ ] 无红色错误信息
- [ ] 无 404 错误（文件未找到）
- [ ] 无 JavaScript 错误
- [ ] 可能有的正常日志：
  - `Reinitializing countdown...`（如果有动态初始化）

---

## 🐛 常见问题排查

### 问题 1：页面显示空白或功能不工作

**可能原因：**
- 浏览器缓存了旧文件
- 文件路径错误

**解决方法：**
1. 清除浏览器缓存
2. 使用强制刷新（Ctrl+F5 或 Cmd+Shift+R）
3. 检查浏览器控制台的错误信息
4. 检查 Network 标签，确认文件加载成功

---

### 问题 2：待办清单数据丢失

**可能原因：**
- localStorage 被清除
- 使用了隐私模式

**解决方法：**
1. 检查浏览器是否在隐私模式
2. 检查 localStorage 是否被禁用
3. 查看 Application → Local Storage 中的数据

---

### 问题 3：404 错误（文件未找到）

**可能原因：**
- 文件路径错误
- 文件未正确创建

**解决方法：**
1. 检查文件是否存在：
   - `assets/pomodoro.js`
   - `assets/pomodoro.css`
   - `assets/todo.js`
   - `assets/todo.css`
2. 检查文件路径是否正确
3. 重新构建网站

---

### 问题 4：功能部分工作

**可能原因：**
- JavaScript 错误
- 模块加载顺序问题

**解决方法：**
1. 查看浏览器控制台的错误信息
2. 确认 `timer-manager.js` 在其他脚本之前加载
3. 检查脚本的 `defer` 属性设置

---

## ✅ 测试通过标准

所有以下条件都满足时，测试通过：

1. ✅ 背单词页面所有功能正常
2. ✅ 番茄钟页面所有功能正常
3. ✅ 数据在页面间共享
4. ✅ 数据持久化正常
5. ✅ 无控制台错误
6. ✅ 无 404 错误
7. ✅ 性能正常，无明显卡顿

---

## 📊 测试结果记录

**测试日期：** ___________

**测试人员：** ___________

**浏览器：** ___________

**测试结果：**
- [ ] ✅ 全部通过
- [ ] ⚠️ 部分通过（记录问题）
- [ ] ❌ 未通过（记录问题）

**发现的问题：**
1. ___________
2. ___________
3. ___________

**备注：**
___________

---

## 🎉 测试完成

如果所有测试通过，恭喜！重构成功完成。

如果有问题，请参考"常见问题排查"部分，或查看相关文档：
- `REFACTORING-SUMMARY.md`
- `CLEANUP-FINAL-REPORT.md`
- `TODO-STANDALONE-GUIDE.md`
