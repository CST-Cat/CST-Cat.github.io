# 📚 词汇复习系统升级说明

## 🎯 新增功能

### 1. **智能复习队列**
基于艾宾浩斯遗忘曲线的间隔复习系统，科学安排复习时间。

#### 复习间隔算法
```javascript
// 根据掌握程度自动调整复习间隔
不认识 (unknown):  1天后复习
模糊 (learning):   1 → 2 → 4 → 7 → 15天
认识 (known):      3 → 7 → 15 → 30 → 60 → 90天
```

### 2. **优先复习机制**
- ✅ 每天学习前，优先展示到期的复习单词
- ✅ 复习完成后，再学习新词
- ✅ 智能混合：复习词不足时自动补充新词

### 3. **侧栏复习提醒**
- 🔄 显示待复习单词数量
- 📊 区分"今日新学"和"今日复习"
- 💡 醒目的复习提醒卡片（带动画效果）

### 4. **学习状态标记**
- 🔄 复习单词：显示"复习"标记
- 📖 新单词：显示"新词"标记
- 📈 实时更新学习进度

---

## 🔧 技术实现

### 核心函数

#### 1. 计算下次复习时间
```javascript
function calculateNextReview(reviewCount, lastResult) {
    // 根据掌握程度和复习次数计算间隔
    // 返回下次复习的日期
}
```

#### 2. 判断是否需要复习
```javascript
function shouldReview(bankId, wordId) {
    // 检查单词是否到期需要复习
    // 返回 true/false
}
```

#### 3. 组合学习队列
```javascript
// 先复习，再学新词
const reviewWords = bank.words.filter(w => shouldReview(bankId, w.id));
const newWords = bank.words.filter(w => status === 'unknown');
const todayWords = [...shuffleArray(reviewWords), ...shuffleArray(newWords)];
```

### 数据结构

#### 单词状态对象
```javascript
{
    status: 'unknown' | 'learning' | 'known',
    reviewCount: 0,           // 复习次数
    lastReview: '2026-01-21', // 上次复习日期
    nextReview: '2026-01-24', // 下次复习日期
    lastResult: 'known'       // 上次学习结果
}
```

---

## 📊 学习流程

### 典型学习场景

```
第1天：学习 20 个新词
  ├─ 不认识 5 个 → 明天复习
  ├─ 模糊 10 个 → 明天复习
  └─ 认识 5 个 → 3天后复习

第2天：先复习 15 个（昨天的不认识+模糊）
  ├─ 复习完成后
  └─ 继续学习 5 个新词

第3天：复习到期的单词 + 新词
  └─ 循环往复...
```

### 学习优先级

1. **最高优先级**：到期的复习单词
2. **次优先级**：新单词（补充到每日目标）
3. **智能调度**：确保每天学习量适中

---

## 🎨 界面改进

### 侧栏新增元素

#### 复习提醒卡片
```
┌─────────────────────┐
│ 🔄  待复习          │
│     12 词           │
└─────────────────────┘
```

#### 统计信息更新
```
本周统计
• 新学    45 词
• 复习    23 词  ← 新增
• 掌握率  68%
```

### 主区域改进

#### 单词卡片标记
```
🔄 复习  第 3/20 词  ← 复习单词
📖 新词  第 15/20 词 ← 新单词
```

#### 底部统计扩展
```
今日新学  今日复习  累计掌握  掌握率
   8        5        156      68%
```

---

## 🚀 使用建议

### 最佳实践

1. **每天坚持**：即使只复习几个单词也比不复习好
2. **诚实评估**：根据真实掌握程度选择"不认识/模糊/认识"
3. **优先复习**：先完成复习任务，再学新词
4. **适量学习**：建议每天 20-30 词，质量优于数量

### 学习策略

- **不认识**：完全不会，需要重新学习
- **模糊**：有印象但不确定，需要巩固
- **认识**：完全掌握，可以延长复习间隔

### 复习节奏

```
Week 1: 每天学习 20 新词 + 复习到期词
Week 2: 复习量增加，新词量可适当减少
Week 3: 进入稳定期，复习和新学平衡
Week 4+: 长期记忆形成，复习间隔拉长
```

---

## 📈 预期效果

### 记忆曲线优化

传统方式：
```
学习 → 遗忘 → 重新学习 → 再次遗忘
```

间隔复习：
```
学习 → 及时复习 → 巩固 → 长期记忆
```

### 学习效率提升

- ✅ **记忆保持率**：从 20% 提升到 80%+
- ✅ **学习时间**：减少 50% 的重复学习时间
- ✅ **长期记忆**：90天后仍能记住 70%+ 的单词

---

## 🔄 数据兼容性

### 向后兼容

- ✅ 旧数据自动升级到新格式
- ✅ 未设置 `nextReview` 的单词自动计算
- ✅ 导入导出功能完全兼容

### 数据迁移

系统会自动为现有单词添加复习信息：
```javascript
// 旧格式
{ status: 'learning', reviewCount: 2 }

// 自动升级为新格式
{ 
    status: 'learning', 
    reviewCount: 2,
    nextReview: '2026-01-24'  // 自动计算
}
```

---

## 🎓 科学依据

### 艾宾浩斯遗忘曲线

人类记忆遗忘规律：
- 20分钟后：遗忘 42%
- 1小时后：遗忘 56%
- 1天后：遗忘 74%
- 1周后：遗忘 77%
- 1个月后：遗忘 79%

### 间隔重复效应

通过在遗忘临界点复习，可以：
- 强化神经连接
- 延长记忆保持时间
- 减少总复习次数
- 形成长期记忆

---

## 📝 更新日志

### v2.0 - 2026.01.21

**新增功能**
- ✅ 智能复习队列系统
- ✅ 基于遗忘曲线的间隔算法
- ✅ 侧栏复习提醒
- ✅ 学习状态标记
- ✅ 今日复习统计

**优化改进**
- ✅ 学习流程优化（先复习后学新）
- ✅ 数据结构扩展（添加复习时间字段）
- ✅ 界面视觉优化（复习提醒动画）

**技术升级**
- ✅ 复习算法实现
- ✅ 数据兼容性处理
- ✅ 性能优化

---

## 💡 未来计划

### 可能的增强功能

1. **自适应算法**：根据个人学习情况动态调整间隔
2. **学习曲线图表**：可视化展示学习进度
3. **复习提醒通知**：浏览器通知到期复习
4. **学习报告**：每周/每月学习总结
5. **错题本**：重点标记难记单词

---

## 🤝 反馈与建议

如有问题或建议，欢迎反馈！

**常见问题**
- Q: 复习单词太多怎么办？
  - A: 可以分批复习，系统会自动保存进度

- Q: 能否跳过复习直接学新词？
  - A: 建议先复习，但可以刷新页面重新加载

- Q: 复习间隔能否自定义？
  - A: 当前使用科学的默认间隔，未来可能支持自定义

---

**享受科学高效的单词学习之旅！** 🚀
