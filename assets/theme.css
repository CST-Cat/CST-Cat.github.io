/*******************************************************************************
THEME CONFIGURATION
主题配置 - 深色/浅色模式切换

This file contains all styles related to light/dark theme switching.
*******************************************************************************/

/*******************************************************************************
CSS CUSTOM PROPERTIES (Theme Variables)
*******************************************************************************/

:root {
    /* Light mode colors (default) */
    --theme-bg: #e8e6dc;
    --theme-text: #141413;
    --theme-heading: #141413;
    --theme-code-bg: #dcd9ce;
    --theme-code-text: inherit;
    --theme-code-border: #ccc9be;
    --theme-pre-bg: #dcd9ce;
    --theme-pre-border: #ccc9be;
    --theme-line-numbers-border: #ddd;
    --theme-line-numbers-text: #aaa;
    --theme-copy-btn-bg: #fff;
    --theme-copy-btn-text: #666;
    --theme-copy-btn-border: #ccc;
    --theme-copy-btn-hover-bg: #f0f0f0;
    --theme-copy-btn-hover-text: #333;
    --theme-copy-btn-copied-bg: #e6fffa;
    --theme-copy-btn-copied-text: #008000;
    --theme-copy-btn-copied-border: #008000;
    --theme-table-border: #ccc;
    --theme-table-header-bg: #f5f5f5;
    --theme-table-row-even: #fafafa;
    --theme-table-row-hover: #f0f0f0;
    --theme-table-row-hover: #f0f0f0;
    --theme-math-filter: none;
    --theme-margin-text: #4a4a45;
}

/* Dark mode variables - 低对比度柔和配色 */
html[data-theme="dark"],
html:not([data-theme]) {
    --theme-bg: #1e1e1e;
    --theme-text: #c5c5c5;
    --theme-heading: #d8d8d8;
    --theme-code-bg: #2a2a2a;
    --theme-code-text: #c8c8c8;
    --theme-code-border: #383838;
    --theme-pre-bg: #2a2a2a;
    --theme-pre-border: #383838;
    --theme-line-numbers-border: #404040;
    --theme-line-numbers-text: #606060;
    --theme-copy-btn-bg: #2e2e2e;
    --theme-copy-btn-text: #a0a0a0;
    --theme-copy-btn-border: #454545;
    --theme-copy-btn-hover-bg: #3a3a3a;
    --theme-copy-btn-hover-text: #c8c8c8;
    --theme-copy-btn-copied-bg: #1f3d2d;
    --theme-copy-btn-copied-text: #6bc485;
    --theme-copy-btn-copied-border: #6bc485;
    --theme-table-border: #3a3a3a;
    --theme-table-header-bg: #282828;
    --theme-table-row-even: #252525;
    --theme-table-row-hover: #303030;
    --theme-table-row-hover: #303030;
    --theme-math-filter: invert(0.88) hue-rotate(180deg);
    --theme-margin-text: #8a8a8a;
}

/* System preference: only apply dark variables when no explicit theme is set */
@media (prefers-color-scheme: light) {
    html:not([data-theme]) {
        --theme-bg: #e8e6dc;
        --theme-text: #141413;
        --theme-heading: #141413;
        --theme-code-bg: #dcd9ce;
        --theme-code-text: inherit;
        --theme-code-border: #ccc9be;
        --theme-pre-bg: #dcd9ce;
        --theme-pre-border: #ccc9be;
        --theme-line-numbers-border: #ddd;
        --theme-line-numbers-text: #aaa;
        --theme-copy-btn-bg: #fff;
        --theme-copy-btn-text: #666;
        --theme-copy-btn-border: #ccc;
        --theme-copy-btn-hover-bg: #f0f0f0;
        --theme-copy-btn-hover-text: #333;
        --theme-copy-btn-copied-bg: #e6fffa;
        --theme-copy-btn-copied-text: #008000;
        --theme-copy-btn-copied-border: #008000;
        --theme-table-border: #ccc;
        --theme-table-header-bg: #f5f5f5;
        --theme-table-row-even: #fafafa;
        --theme-table-row-hover: #f0f0f0;
        --theme-table-row-hover: #f0f0f0;
        --theme-math-filter: none;
        --theme-margin-text: #4a4a45;
    }
}


/*******************************************************************************
THEME STYLES (using CSS variables)
*******************************************************************************/

html {
    background-color: var(--theme-bg) !important;
    color: var(--theme-text) !important;
}

body {
    background-color: var(--theme-bg) !important;
    color: var(--theme-text) !important;
}

h1,
h2,
h3,
h4,
h5 {
    color: var(--theme-heading) !important;
}

a,
a:link,
a:visited {
    color: inherit !important;
    background-color: transparent !important;
    text-shadow: none !important;
    background-image: none !important;
    text-decoration: underline !important;
    text-underline-offset: 0.3em;
    text-decoration-thickness: 1px;
    text-decoration-skip-ink: auto;
}

code {
    background-color: var(--theme-code-bg) !important;
    color: var(--theme-code-text) !important;
    border-color: var(--theme-code-border) !important;
}

pre {
    background-color: var(--theme-pre-bg) !important;
    border-color: var(--theme-pre-border) !important;
}

pre>code {
    color: var(--theme-code-text) !important;
}

.line-numbers-rows {
    border-right-color: var(--theme-line-numbers-border) !important;
    color: var(--theme-line-numbers-text) !important;
}

.copy-button {
    background-color: var(--theme-copy-btn-bg) !important;
    color: var(--theme-copy-btn-text) !important;
    border-color: var(--theme-copy-btn-border) !important;
}

.copy-button:hover {
    background-color: var(--theme-copy-btn-hover-bg) !important;
    color: var(--theme-copy-btn-hover-text) !important;
}

.copy-button.copied {
    background-color: var(--theme-copy-btn-copied-bg) !important;
    color: var(--theme-copy-btn-copied-text) !important;
    border-color: var(--theme-copy-btn-copied-border) !important;
}

.marginnote {
    color: var(--theme-margin-text) !important;
}

div[style*="border-inline-start"] .footnote-ref,
div[style*="border-inline-start"] .marginnote,
div[style*="border-inline-start"] .footnote-ref a {
    color: var(--theme-heading) !important;
}

table th,
table td {
    border-color: var(--theme-table-border) !important;
}

table th,
table thead td {
    background-color: var(--theme-table-header-bg) !important;
}

table tbody tr:nth-child(even) {
    background-color: var(--theme-table-row-even) !important;
}

table tbody tr:hover {
    background-color: var(--theme-table-row-hover) !important;
}

[role="math"] {
    filter: var(--theme-math-filter) !important;
}


/*******************************************************************************
THEME TOGGLE BUTTON (DeepWiki Style)
*******************************************************************************/

.theme-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.4rem;
    height: 2.4rem;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    margin-left: auto;
    margin-right: 3em;
    margin-top: 1.6em;
    transition: background-color 0.15s ease;
    color: #374151;
    /* 浅色模式下月亮图标颜色 */
}

.theme-toggle-btn:hover {
    background: var(--highlight-weak, rgba(128, 128, 128, 0.2));
}

.theme-toggle-btn:focus-visible {
    outline: 2px solid var(--highlight-strong, rgba(128, 128, 128, 0.4));
    outline-offset: 2px;
}

.theme-toggle-btn svg {
    width: 1.8rem;
    height: 1.8rem;
}

/* 深色模式下太阳图标颜色 */
.theme-toggle-btn.is-dark {
    color: #d1d5db;
}